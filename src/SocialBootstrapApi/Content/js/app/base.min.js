(function(a){$.ss.validation.overrideMessages=!0;var b=a.App=a.App||{},c=function(){},d=function(b){var c=a.BASE_URL&&b.indexOf("://")===-1&&b.charAt(0)!=="/";return c?a.BASE_URL+b:b};_.mixin({formData:function(a){var b={};return $(a).find("INPUT,TEXTAREA").each(function(){if(this.type=="button"||this.type=="submit")return;if(this.type=="checkbox"){if(!this.checked)return;b[this.name]=this.value==="on"?!0:this.value;return}b[this.name]=$(this).val()}),b},xhrMessage:function(a){try{var b=JSON.parse(a.responseText);return b.responseStatus?b.responseStatus.message:null}catch(c){return null}},get:function(a,b,c,d){return _.isFunction(b)&&(c=b,d=c,b=undefined),_.ajax({type:"GET",url:a,data:b,success:c,error:d})},post:function(a){return _.ajax(a)},ajax:function(a){var e=_.defaults(a,{type:"POST",loading:function(){$(document.body).add(a.form).addClass("loading")},finishedLoading:function(){$(document.body).add(a.form).removeClass("loading")},dataType:"json"});e.loading(),$.ajax({type:e.type,url:d(e.url),data:e.data,success:function(){e.finishedLoading(),$(e.form).clearErrors(),e.success&&e.success.apply(null,arguments)},error:function(a,d,f){e.finishedLoading();try{if(e.form){var g=JSON.parse(a.responseText);$(e.form).applyErrors(g&&g.responseStatus)}}catch(h){}(e.error||b.error||c).apply(null,arguments)},dataType:e.dataType||"json"})}}),b.BaseModel=Backbone.Model.extend({initialize:function(){console.log("BaseModel...")},parse:function(a,b){return a?a.result||a.results||a:a},sync:function(a,b,c){b.url=d(b.url),Backbone.sync(a,b,c)},_super:function(a){return this.constructor.__super__[a].apply(this,_.rest(arguments))}}),b.BaseView=Backbone.View.extend({loading:function(){$(this.el).css({opacity:.5})},finishedLoading:function(){$(this.el).css({opacity:1})}})})(window)