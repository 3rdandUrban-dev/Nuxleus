(function(a){var b=a.App;b.Login=b.BaseModel.extend({urlRoot:"api/auth/credentials",defaults:{isAuthenticated:null,hasRegistered:!1,sessionId:null,userId:null,displayName:null,form:null},initialize:function(){_.bindAll(this,"loginSuccess","loginError")},signOut:function(){console.log("Login.signOut"),this.set({isAuthenticated:!1})},login:function(a){this.$form=a,_.post({form:a,url:a.attr("action"),data:_.formData(a),success:this.loginSuccess,error:this.loginError})},loginSuccess:function(a){this.$form.removeClass("error"),this.set({isAuthenticated:!0})},loginError:function(){this.$form.addClass("error")}}),b.LoginView=b.BaseView.extend({className:"view-login",initialize:function(){_.bindAll(this,"login","render"),this.model.bind("change:isAuthenticated",this.render),this.model.bind("change:displayName",this.render),this.$("form").submit(this.login)},login:function(a){a&&a.preventDefault(),this.model.login(this.$("form"))},render:function(){$("BODY").toggleClass("authenticated",this.model.get("isAuthenticated")),$("BODY").toggleClass("registered",this.model.get("hasRegistered")),$("#signed-in a.dropdown-toggle").html(this.model.get("displayName")||"")},signOut:function(){console.log("LoginView.signOut");var a=this;_.get("api/auth/logout",function(){a.model.set({isAuthenticated:!1})})}})})(window)