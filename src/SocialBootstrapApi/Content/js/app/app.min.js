(function(a){var b=a.App;_.extend(b,{baseUrl:window.BASE_URL,UnAuthorized:401,initialize:function(){this.handleClicks()},handleClicks:function(){$(document.body).click(function(a){console.log("handleClicks",a);var c=$(a.srcElement).data("cmd");if(!c)return;var d=c.split(":"),e=d[0],f=d.length>1?d[1].split(","):[];b.sendCmd(e,f)})},navigate:function(a){this.routes.navigate(a)},route:function(a){var b=_.rest(arguments);console.log("route: "+a,b),this.sendCmd(a,b)},sendCmd:function(a,b){_.isFunction(this.routes[a])&&this.routes[a].apply(this.routes,b),_.each(this.models,function(c){_.isFunction(c[a])&&c[a].apply(c,b)}),_.each(this.views,function(c){_.isFunction(c[a])&&c[a].apply(c,b)})},error:function(a,b,c){console.log("App Error: ",arguments),this.trigger("error",arguments),a.status==this.UnAuthorized&&$.getJSON("api/userinfo",function(a){},function(a){a.status==this.UnAuthorized&&(location.href=location.href)})}}),_.extend(b,Backbone.Events),_.bindAll(b,"error","trigger","navigate","sendCmd");var c=new b.Login,d=new b.UserProfile({login:c}),e=new b.Twitter({profile:d});b.Routes=Backbone.Router.extend({routes:{tweets:"tweets",friends:"friends",followers:"followers",userTweets:":user/tweets",userFriends:":user/friends",userFollowers:":user/followers"},initialize:function(a){this.app=a.app},tweets:function(){this.app.route("twitterProfileChange",c.get("screenName"),"tweets")},friends:function(){this.app.route("twitterProfileChange",c.get("screenName"),"friends")},followers:function(){this.app.route("twitterProfileChange",c.get("screenName"),"followers")},userTweets:function(a){this.app.route("twitterProfileChange",a,"tweets")},userFriends:function(a){this.app.route("twitterProfileChange",a,"friends")},userFollowers:function(a){this.app.route("twitterProfileChange",a,"followers")}}),b.routes=new b.Routes({app:b}),console.log(c.attributes,d.attributes,e.attributes),b.models={login:c,userProfile:d,twitter:e},_.each(b.models,function(a){a.sendCmd=b.sendCmd,a.navigate=b.navigate}),b.views={login:new b.LoginView({el:"#login",model:c}),register:new b.RegisterView({el:"#register",model:c}),userProfile:new b.UserProfileView({el:"#user-profile",model:d}),twitter:new b.TwitterView({el:"#twitter",model:e})},b.initialize(),$(".tabs").tabs(),Backbone.history.start({pushState:!0})})(window)