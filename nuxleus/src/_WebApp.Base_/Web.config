<?xml version="1.0"?>
<!--
  COPYRIGHT: (c) 2006 by M. David Peterson and Sylvain Hellegouarch
  LICENSE: The code contained in this file is licensed under The MIT License. 
  Please see http://www.opensource.org/licenses/mit-license.php for specific detail.
-->
<configuration>
	<configSections>
		<sectionGroup name="Xameleon.WebApp">
			<section name="xameleon" type="Nuxleus.Configuration.AspNetXameleonConfiguration,Xameleon"/>
			<section name="memcached" type="Nuxleus.Configuration.AspNetMemcachedConfiguration,Xameleon"/>
			<section name="aws" type="Nuxleus.Configuration.AspNetAwsConfiguration,Xameleon"/>
			<section name="bungee" type="Nuxleus.Configuration.AspNetBungeeAppConfiguration,Xameleon"/>
			<section name="queueserver" type="Nuxleus.Configuration.AspNetQueueServerConfiguration,Xameleon"/>
		</sectionGroup>
		<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
			<sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
				<section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
				<sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
					<section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
					<section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
					<section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
					<section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/></sectionGroup></sectionGroup></sectionGroup></configSections>
	<Xameleon.WebApp>
		<xameleon debugMode="no" useMemcached="no" defaultEngine="Saxon">
			<baseSettings baseXsltName="base" objectHashKey="1234567890"/>
			<preCompiledXslt base-uri="~">
				<add name="base" useAsBaseXslt="yes" base-uri="~" uri="/transform/base.xslt"/>
				<add name="base-result-document" base-uri="~" uri="/transform/base.xslt" baseOutputUri="~"/>
				<add name="base-client-xslt" base-uri="~" uri="/transform/base.xslt" initialMode="client-xslt"/>
				<!--
        <add name="base-blip-message" base-uri="~" uri="/transform/base.xslt" initialTemplate="base-blip-message"/>
        -->
			</preCompiledXslt>
			<globalXsltParams>
				<add name="google.maps.key" select="YOUR.GOOGLE.MAPS.KEY"/>
			</globalXsltParams>
			<sessionXsltParams/>
			<httpContextXsltParams/>
			<requestXsltParams/>
		</xameleon>
		<aws>
			<awsS3 defaultBucket="YOUR.DEFAULT.BUCKET" defaultKeyPrefix="YOUR.DEFAULT.KEY.PREFIX">
				<add name="foo" key="bar" value="baz"/>
			</awsS3>
			<awsKeyCollection externalFile="/path/to/external/key/collection/file.config">
				<add name="aws-one" public-key="YOUR-FIRST-AWS-PUBLIC-KEY" private-key="YOUR-FIRST-AWS-PRIVATE-KEY"/>
				<add name="aws-two" public-key="YOUR-SECOND-AWS-PUBLIC-KEY" private-key="YOUR-SECOND-AWS-PRIVATE-KEY"/>
			</awsKeyCollection>
		</aws>
		<bungee>
			<application defaultAppVersion="YOUR.DEFAULT.APP.ID">
				<add name="YOUR.BUNGEE.APP.NAME" version="YOUR.BUNGEE.APP.VERSION" deployID="YOUR.DEPLOY.ID" deployURL="YOUR.DEPLOY.URL" z="YOUR.Z" elementID="ELEMENT.ID.TO.RENDER.APP.IN"/>
			</application>
		</bungee>
		<memcached useCompression="no">
			<poolConfig initConnections="5" minConnections="5" maxConnections="1024" socketConnectTimeout="1000" socketConnect="3000" maintenanceSleep="30" failover="true" nagle="true"/>
			<server>
				<add name="localhost" ip="127.0.0.1" port="11211"/>
			</server>
		</memcached>
		<queueserver ip="127.0.0.1" port="9876" poolSize="5" threshold="10"/>
	</Xameleon.WebApp>
	<appSettings>
		<add key="MonoServerDefaultIndexFiles" value="service.op,default.omx,index.xml,index.aspx,default.aspx,index.html"/>
	</appSettings>
	<system.web>
		<httpHandlers>
			<add verb="GET,HEAD" path="*.xml" type="System.Web.StaticFileHandler"/>
			<add verb="GET,HEAD" path="*.atom" type="System.Web.StaticFileHandler"/>
			<add verb="GET,HEAD" path="*.omx" type="Nuxleus.Web.HttpHandler.NuxleusHttpAsyncHandler,Nuxleus.Web"/>
			<add verb="GET,HEAD,PUT,POST,DELETE" path="*.op" type="Nuxleus.Web.HttpHandler.NuxleusHttpAsyncHandler,Nuxleus.Web"/>
			<remove verb="*" path="*.asmx"/>
			<add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
			<add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
			<add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></httpHandlers>
		<!-- <httpModules>
      <add name="AsyncRequestLogHttpModule" type="Nuxleus.Web.HttpModule.AsyncRequestLogHttpModule,Nuxleus.Web" />
    </httpModules> -->
		<sessionState mode="Off"/>
		<authentication mode="None"/>
		<customErrors mode="Off"/>
		<compilation debug="true">
			<assemblies>
				<add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
				<add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
				<add assembly="System.Data.DataSetExtensions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation>
		<httpRuntime executionTimeout="300"/>
		<pages>
			<controls>
				<add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
				<add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></controls></pages>
		<httpModules>
			<add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></httpModules></system.web>
	<!-- <system.net>
    <connectionManagement>
      <add address="*" maxconnection="20" />
    </connectionManagement>
  </system.net> -->
	<system.codedom>
			<compilers>
				<compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider,System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4" compilerOptions="/warnaserror-">
					<providerOption name="CompilerVersion" value="v3.5"/></compiler>
				<compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" compilerOptions="/optioninfer+">
					<providerOption name="CompilerVersion" value="v3.5"/></compiler></compilers></system.codedom>
	<system.web.extensions>
		<scripting>
			<webServices><!--
			Uncomment this section to enable the authentication service. Include requireSSL="true" if appropriate.
			<authenticationService enabled="true" requireSSL = "true|false"/>
		-->
			<!--
			Uncomment these lines to enable the profile service, and to choose
			the profile properties that can be retrieved and modified in ASP.NET AJAX applications.

			<profileService enabled="true" readAccessProperties="propertyname1,propertyname2" writeAccessProperties="propertyname1,propertyname2" />
		-->
			<!--
			Uncomment this section to enable the role service.
			<roleService enabled="true"/>
		-->
			</webServices></scripting></system.web.extensions>
	<!--
		The system.webServer section is required for running ASP.NET AJAX under Internet
		Information Services 7.0. It is not necessary for previous version of IIS.
	-->
	<system.webServer>
			<validation validateIntegratedModeConfiguration="false"/>
		<modules>
			<add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></modules>
		<handlers>
			<remove name="WebServiceHandlerFactory-Integrated"/>
			<add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
			<add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
			<add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></handlers></system.webServer></configuration>
